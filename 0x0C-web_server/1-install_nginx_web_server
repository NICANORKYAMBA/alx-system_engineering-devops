#!/bin/bash

# Install Nginx
sudo apt-get update
sudo apt-get install nginx -y

# Configure Nginx to listen on port 80
sudo sed -i 's/listen\s*80;/listen 80 default_server;/g' /etc/nginx/sites-available/default

# Restart Nginx without using systemctl
sudo kill -s HUP $(cat /var/run/nginx.pid)

# Create a webpage that says "Hello World!"
echo -e "Hello World!" | sudo tee /var/www/html/index.html

# Test that Nginx is working correctly
response=$(curl -s localhost)
if [[ "$response" == *"Hello World!"* ]]; then
    echo "Nginx is working correctly."
else
    echo "Nginx is not working correctly."
fi
